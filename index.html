<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OutfitRater</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="animations.css">
</head>

<body>

<header>
  <h1>OutfitRater</h1>
  <span>Rate outfits honestly</span>
</header>

<main>

  <div class="upload-card">
    <h2>Upload Your Outfit</h2>
    <p>Choose a clear photo of your outfit.</p>

    <label class="upload-box">
      Click to upload image
      <input type="file" accept="image/*" id="imageInput">
    </label>

    <div class="preview" id="preview">
      <img id="previewImage" />
    </div>
  </div>

<div class="rate-card">
  <h2>Rate This Outfit</h2>
  <p class="muted">Click a score. Your vote counts.</p>

  <div class="rate-buttons">
    <button onclick="rate(1)">1</button>
    <button onclick="rate(2)">2</button>
    <button onclick="rate(3)">3</button>
    <button onclick="rate(4)">4</button>
    <button onclick="rate(5)">5</button>
  </div>

  <div class="rating-bar">
    <div class="rating-fill" id="ratingFill"></div>
  </div>

  <div class="score" id="scoreText"></div>
  <div class="stats" id="statsText"></div>
</div>

</main>

<footer>
  © 2026 OutfitRater • Built by <strong>Mouad</strong> & <strong>Iman</strong>
</footer>

<script>
  const input = document.getElementById("imageInput");
  const preview = document.getElementById("preview");
  const img = document.getElementById("previewImage");
  const scoreText = document.getElementById("scoreText");
  const statsText = document.getElementById("statsText");
  const ratingFill = document.getElementById("ratingFill");

  let ratings = JSON.parse(localStorage.getItem("ratings")) || [];

  input.addEventListener("change", () => {
    const file = input.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = () => {
      img.src = reader.result;
      preview.style.display = "block";
      scoreText.style.display = "none";
      statsText.textContent = "";
      ratingFill.style.width = "0%";
    };
    reader.readAsDataURL(file);
  });

  function rate(value) {
    if (!img.src) {
      alert("Upload an outfit first.");
      return;
    }

    ratings.push(value);
    localStorage.setItem("ratings", JSON.stringify(ratings));

    const avg =
      ratings.reduce((a, b) => a + b, 0) / ratings.length;

    ratingFill.style.width = `${(avg / 5) * 100}%`;

    scoreText.textContent = `Average Rating: ${avg.toFixed(1)} / 5`;
    scoreText.style.display = "block";

    statsText.textContent = `Based on ${ratings.length} vote(s)`;
  }
</script>

</body>
</html>

